<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>jQuery API Benchmark</title>
<link rel="stylesheet" href="https://raw.github.com/necolas/normalize.css/master/normalize.css" />
<link rel="stylesheet" href="css/apiBenchmark.css">
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
</head>
<body>

<div id="hoge" class="fuga">
	&lt;div id="hoge" class="fuga"&gt;
</div>
<hr />
<p>実行結果</p>
<script>
	var jqBenchmark = function(selector) {
		var timeS = new Date();	//計測開始時刻
		var count = 10000;
		var temp = 0;
		while (count--) {
			var hoge = $(selector);
			temp++;
		}
		var timeE = new Date()	//計測終了時刻
		return timeE - timeS;
	};

	var getIdBenchmark = function(selector) {
		var timeS = new Date();	//計測開始時刻
		var count = 10000;
		var temp = 0;
		while (count--) {
			var hoge = document.getElementById(selector);
			temp++;
		}
		var timeE = new Date()	//計測終了時刻
		return timeE - timeS;
	};

	var getClassBenchmark = function(selector) {
		var timeS = new Date();	//計測開始時刻
		var count = 10000;
		var temp = 0;
		while (count--) {
			var hoge = document.getElementsByClassName(selector);
			temp++;
		}
		var timeE = new Date()	//計測終了時刻
		return timeE - timeS;
	};

	var querySelectorAllBenchmark = function(selector) {
		var timeS = new Date();	//計測開始時刻
		var count = 10000;
		var temp = 0;
		while (count--) {
			var hoge = document.querySelectorAll(selector);
			temp++;
		}
		var timeE = new Date()	//計測終了時刻
		return timeE - timeS;
	};

	document.write(
	'<table>'
		+ "<tr><th>$('div#hoge') * 10000</th><td class='value'>" + jqBenchmark('div#hoge') + ' ms</td></tr>'
		+ "<tr><th>$('#hoge') * 10000</th><td class='value'>" + jqBenchmark('#hoge') + ' ms</td></tr>'
		+ "<tr><th>$('div.fuga') * 10000</th><td class='value'>" + jqBenchmark('div.fuga') + ' ms</td></tr>'
		+ "<tr><th>$('.fuga') * 10000</th><td class='value'>" + jqBenchmark('.fuga') + ' ms</td></tr>'
		+ "<tr><th>$('#hoge:first') * 10000</th><td class='value'>" + jqBenchmark('#hoge:first') + ' ms</td></tr>'
	+ '</table>'

	+ '<table>'
		+ "<tr><th>getElementById('#hoge') * 10000</th><td class='value'>" + getIdBenchmark('hoge') + ' ms</td></tr>'
		+ "<tr><th>getElementsByClassName('.fuga') * 10000</th><td class='value'>" + getClassBenchmark('fuga') + ' ms</td></tr>'
		+ "<tr><th>querySelectorAll('#hoge') * 10000</th><td class='value'>" + querySelectorAllBenchmark('#hoge') + ' ms</td></tr>'
		+ "<tr><th>querySelectorAll('.fuga') * 10000</th><td class='value'>" + querySelectorAllBenchmark('.fuga') + ' ms</td></tr>'
	+ '</table>');
</script>
</body>
</html>